<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Rational.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">activity</a> &gt; <a href="index.source.html" class="el_package">numbers</a> &gt; <span class="el_source">Rational.java</span></div><h1>Rational.java</h1><pre class="source lang-java linenums">package numbers;

import java.math.BigInteger;

public class Rational extends Number implements Comparable&lt;Number&gt; {

  private static final long serialVersionUID = 1L;
  private int numerator;
  private int denominator;

  // Default constructor
  public Rational() {
<span class="fc" id="L13">    this(0, 1); // chaining with 2 param constructor</span>
<span class="fc" id="L14">  }</span>

  // One param (numerator) constructor
  public Rational(int numerator) {
<span class="fc" id="L18">    this(numerator, 1); // chaining with 2 param constructor</span>
<span class="fc" id="L19">  }</span>

  // Two param (numerator, denominator) constructor
<span class="fc" id="L22">  public Rational(int numerator, int denominator) {</span>
<span class="fc bfc" id="L23" title="All 2 branches covered.">    if (denominator == 0) {</span>
<span class="fc" id="L24">      throw new IllegalArgumentException(&quot;Denominator can't be zero.&quot;);</span>
    }

    // Normalize the rational number if the denominator is negative
    // Ensures that the rational number is always represented with a positive denominator
<span class="fc bfc" id="L29" title="All 2 branches covered.">    if (denominator &lt; 0) {</span>
<span class="fc" id="L30">      numerator = -numerator;</span>
<span class="fc" id="L31">      denominator = -denominator;</span>
    }

    // Simplify the fraction
<span class="fc" id="L35">    int gcd = gcd(numerator, denominator);</span>
<span class="fc" id="L36">    this.numerator = numerator / gcd;</span>
<span class="fc" id="L37">    this.denominator = denominator / gcd;</span>
<span class="fc" id="L38">  }</span>

<span class="fc" id="L40">  public Rational(Rational original) {</span>
<span class="fc" id="L41">    this.numerator = original.numerator;</span>
<span class="fc" id="L42">    this.denominator = original.denominator;</span>
<span class="fc" id="L43">  }</span>

  public int getNumerator() {
<span class="fc" id="L46">    return numerator;</span>
  }

  public int getDenominator() {
<span class="fc" id="L50">    return denominator;</span>
  }

  // Helper method for Euclidean algorithm
  private static int gcd(int a, int b) {
<span class="fc bfc" id="L55" title="All 2 branches covered.">    return b == 0 ? a : gcd(b, a % b);</span>
  }

  @Override
  public int intValue() {
<span class="fc" id="L60">    return numerator / denominator;</span>
  }

  @Override
  public long longValue() {
<span class="fc" id="L65">    return (long) numerator / denominator;</span>
  }

  @Override
  public float floatValue() {
<span class="fc" id="L70">    return (float) numerator / denominator;</span>
  }

  @Override
  public double doubleValue() {
<span class="fc" id="L75">    return (double) numerator / denominator;</span>
  }

  @Override
  public int compareTo(Number o) {
<span class="fc" id="L80">    double thisVal = this.doubleValue();</span>
<span class="fc" id="L81">    double otherVal = o.doubleValue();</span>
<span class="fc" id="L82">    return Double.compare(thisVal, otherVal);</span>
  }

  public Rational opposite() {
<span class="fc" id="L86">    return new Rational(-this.numerator, this.denominator);</span>
  }

  public Rational reciprocal() {
<span class="fc bfc" id="L90" title="All 2 branches covered.">    if (this.numerator == 0) {</span>
<span class="fc" id="L91">      throw new IllegalArgumentException(&quot;Can't get the reciprocal of 0&quot;);</span>
    }
<span class="fc" id="L93">    return new Rational(this.denominator, this.numerator);</span>
  }

  // multiplies the top and bottom values
  public Rational times(Rational r) {
<span class="fc" id="L98">    return new Rational(</span>
<span class="fc" id="L99">      this.numerator * r.numerator,</span>
<span class="fc" id="L100">      this.denominator * r.denominator</span>
    );
  }

  public Rational plus(Rational r) {
<span class="fc" id="L105">    int newNumerator =</span>
<span class="fc" id="L106">      this.numerator * r.denominator + r.numerator * this.denominator;</span>
<span class="fc" id="L107">    int newDenominator = this.denominator * r.denominator;</span>
<span class="fc" id="L108">    return new Rational(newNumerator, newDenominator);</span>
  }

  //    public Rational minus(Rational r)
  //    {
  //    	int newNumerator = this.numerator * r.denominator - this.denominator * r.numerator;
  //    	int newDenominator = this.denominator * r.denominator;
  //
  //    	int gcd = gcd(newNumerator, newDenominator);
  //    	return new Rational(newNumerator / gcd, newDenominator / gcd);
  //    }

  public Rational minus(Rational r) {
<span class="fc" id="L121">    BigInteger aNumerator = BigInteger.valueOf(this.numerator);</span>
<span class="fc" id="L122">    BigInteger aDenominator = BigInteger.valueOf(this.denominator);</span>
<span class="fc" id="L123">    BigInteger bNumerator = BigInteger.valueOf(r.numerator);</span>
<span class="fc" id="L124">    BigInteger bDenominator = BigInteger.valueOf(r.denominator);</span>

    // Perform the operations using BigInteger
<span class="fc" id="L127">    BigInteger newNumerator = aNumerator</span>
<span class="fc" id="L128">      .multiply(bDenominator)</span>
<span class="fc" id="L129">      .subtract(aDenominator.multiply(bNumerator));</span>
<span class="fc" id="L130">    BigInteger newDenominator = aDenominator.multiply(bDenominator);</span>

    // Check for overflow when converting back to int
    if (
<span class="pc bpc" id="L134" title="1 of 2 branches missed.">      newNumerator.compareTo(BigInteger.valueOf(Integer.MAX_VALUE)) &gt; 0 ||</span>
<span class="pc bpc" id="L135" title="1 of 2 branches missed.">      newNumerator.compareTo(BigInteger.valueOf(Integer.MIN_VALUE)) &lt; 0 ||</span>
<span class="pc bpc" id="L136" title="1 of 2 branches missed.">      newDenominator.compareTo(BigInteger.valueOf(Integer.MAX_VALUE)) &gt; 0 ||</span>
<span class="pc bpc" id="L137" title="1 of 2 branches missed.">      newDenominator.compareTo(BigInteger.valueOf(Integer.MIN_VALUE)) &lt; 0</span>
    ) {
<span class="nc" id="L139">      throw new IllegalArgumentException(&quot;Operation causes integer overflow&quot;);</span>
    }

    // Calculate gcd of BigInteger values
<span class="fc" id="L143">    BigInteger gcd = newNumerator.gcd(newDenominator);</span>
<span class="fc" id="L144">    newNumerator = newNumerator.divide(gcd);</span>
<span class="fc" id="L145">    newDenominator = newDenominator.divide(gcd);</span>

    // Convert BigInteger back to int
<span class="fc" id="L148">    return new Rational(newNumerator.intValue(), newDenominator.intValue());</span>
  }

  public Rational dividesBy(Rational r) {
    // check for division by 0
<span class="fc bfc" id="L153" title="All 2 branches covered.">    if (r.numerator == 0) {</span>
<span class="fc" id="L154">      throw new IllegalArgumentException(&quot;Division by 0 is invalid&quot;);</span>
    }

    // Multiply by reciprocal of r
<span class="fc" id="L158">    return new Rational(</span>
<span class="fc" id="L159">      this.numerator * r.denominator,</span>
<span class="fc" id="L160">      this.denominator * r.numerator</span>
    );
  }

  public Rational raisedToThePowerOf(int n) {
<span class="pc bpc" id="L165" title="1 of 4 branches missed.">    if (this.numerator == 0 &amp;&amp; n &lt; 0) {</span>
<span class="fc" id="L166">      throw new IllegalArgumentException(&quot;Can't raise 0 to a negative power&quot;);</span>
    }

    // Handling negative powers by using the reciprocal
<span class="fc bfc" id="L170" title="All 2 branches covered.">    if (n &lt; 0) {</span>
      // Swap numerator and denominator for reciprocal
<span class="fc" id="L172">      int newNumerator = (int) Math.pow(this.denominator, -n); // Raising to -n makes it positive</span>
<span class="fc" id="L173">      int newDenominator = (int) Math.pow(this.numerator, -n);</span>
<span class="fc" id="L174">      return new Rational(newNumerator, newDenominator);</span>
    } else {
<span class="fc" id="L176">      int newNumerator = (int) Math.pow(this.numerator, n);</span>
<span class="fc" id="L177">      int newDenominator = (int) Math.pow(this.denominator, n);</span>
<span class="fc" id="L178">      return new Rational(newNumerator, newDenominator);</span>
    }
  }

  @Override
  public boolean equals(Object o) {
<span class="pc bpc" id="L184" title="1 of 2 branches missed.">    if (o == this) {</span>
<span class="nc" id="L185">      return true;</span>
    }

<span class="fc bfc" id="L188" title="All 2 branches covered.">    if (o instanceof Rational) {</span>
<span class="fc" id="L189">      Rational other = (Rational) o;</span>
<span class="fc" id="L190">      return (</span>
<span class="pc bpc" id="L191" title="1 of 2 branches missed.">        this.numerator == other.numerator &amp;&amp;</span>
<span class="fc bfc" id="L192" title="All 2 branches covered.">        this.denominator == other.denominator</span>
      );
<span class="fc bfc" id="L194" title="All 2 branches covered.">    } else if (o instanceof Float) {</span>
<span class="fc" id="L195">      float difference = Math.abs(this.floatValue() - (Float) o);</span>
<span class="fc bfc" id="L196" title="All 2 branches covered.">      return difference &lt; Math.pow(2, -20);</span>
<span class="pc bpc" id="L197" title="1 of 2 branches missed.">    } else if (o instanceof Double) {</span>
<span class="fc" id="L198">      double difference = Math.abs(this.doubleValue() - (Double) o);</span>
<span class="fc bfc" id="L199" title="All 2 branches covered.">      return difference &lt; Math.pow(2, -40);</span>
    }
<span class="nc" id="L201">    return false;</span>
  }

  public boolean greaterThan(Number n) {
<span class="fc bfc" id="L205" title="All 2 branches covered.">    return this.doubleValue() &gt; n.doubleValue();</span>
  }

  public boolean greaterThan(Rational r) {
<span class="fc" id="L209">    int thisNumerator = this.numerator * r.denominator;</span>
<span class="fc" id="L210">    int rNumerator = r.numerator * this.denominator;</span>

<span class="fc bfc" id="L212" title="All 2 branches covered.">    return thisNumerator &gt; rNumerator;</span>
  }

  public boolean lessThan(Rational r) {
    // Convert both rationals to a common denominator and compare numerators
<span class="fc" id="L217">    int thisNumerator = this.numerator * r.denominator;</span>
<span class="fc" id="L218">    int rNumerator = r.numerator * this.denominator;</span>

<span class="fc bfc" id="L220" title="All 2 branches covered.">    return thisNumerator &lt; rNumerator;</span>
  }

  public boolean isZero() {
<span class="fc bfc" id="L224" title="All 2 branches covered.">    return this.numerator == 0; // If the numerator is 0, the whole rational number is 0.</span>
  }

  public boolean isOne() {
<span class="pc bpc" id="L228" title="1 of 4 branches missed.">    return this.numerator == this.denominator &amp;&amp; this.numerator != 0;</span>
  }

  public boolean isMinusOne() {
<span class="pc bpc" id="L232" title="1 of 4 branches missed.">    return this.numerator == -this.denominator &amp;&amp; this.numerator != 0;</span>
  }

  public String toString() {
    // Ensure the negative sign is always in the numerator for representation
<span class="fc bfc" id="L237" title="All 2 branches covered.">    if (denominator &lt; 0) {</span>
<span class="fc" id="L238">      return (-numerator) + &quot;/&quot; + (-denominator); // Correct the sign placement</span>
<span class="fc bfc" id="L239" title="All 2 branches covered.">    } else if (denominator == 1) {</span>
<span class="fc" id="L240">      return String.valueOf(numerator); // Whole number representation</span>
    } else {
<span class="fc" id="L242">      return numerator + &quot;/&quot; + denominator; // Standard fraction representation</span>
    }
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.10.202304240956</span></div></body></html>